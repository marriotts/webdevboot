{"changed":false,"filter":false,"title":"app.js","tooltip":"/YelpCamp/v11Deployed/app.js","value":"var express     = require(\"express\"),\n    app         = express(),\n    bodyParser  = require(\"body-parser\"),\n    mongoose    = require(\"mongoose\"),\n    flash       = require(\"connect-flash\"),\n    passport    = require(\"passport\"),\n    LocalStrategy = require(\"passport-local\"),\n    methodOverride = require(\"method-override\"),\n    Campground  = require(\"./models/campground\"),\n    Comment     = require(\"./models/comment\"),\n    User        = require(\"./models/user\"),\n    seedDB      = require(\"./seeds\")\n    \n//requiring routes\nvar commentRoutes    = require(\"./routes/comments\"),\n    campgroundRoutes = require(\"./routes/campgrounds\"),\n    indexRoutes      = require(\"./routes/index\")\n \nvar url = process.env.DATABASEURL || \"mongodb://localhost/yelp_camp_v10\";\nmongoose.connect(url);\n\napp.use(bodyParser.urlencoded({extended: true}));\napp.set(\"view engine\", \"ejs\");\napp.use(express.static(__dirname + \"/public\"));\napp.use(methodOverride(\"_method\"));\napp.use(flash());\n// seedDB(); //seed the database\n\n// PASSPORT CONFIGURATION\napp.use(require(\"express-session\")({\n    secret: \"Once again Rusty wins cutest dog!\",\n    resave: false,\n    saveUninitialized: false\n}));\napp.use(passport.initialize());\napp.use(passport.session());\npassport.use(new LocalStrategy(User.authenticate()));\npassport.serializeUser(User.serializeUser());\npassport.deserializeUser(User.deserializeUser());\n\napp.use(function(req, res, next){\n   res.locals.currentUser = req.user;\n   res.locals.error = req.flash(\"error\");\n   res.locals.success = req.flash(\"success\");\n   next();\n});\n\napp.use(\"/\", indexRoutes);\napp.use(\"/campgrounds\", campgroundRoutes);\napp.use(\"/campgrounds/:id/comments\", commentRoutes);\n\n\napp.listen(process.env.PORT, process.env.IP, function(){\n   console.log(\"The YelpCamp Server Has Started!\");\n});","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":604,"scrollleft":0,"selection":{"start":{"row":20,"column":0},"end":{"row":20,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":22,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1454476997000}